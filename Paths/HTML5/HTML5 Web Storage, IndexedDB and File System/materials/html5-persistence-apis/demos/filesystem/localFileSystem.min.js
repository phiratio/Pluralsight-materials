var localFileSystem=function(){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var t={publisher:null,setErrorPublisher:function(n){t.publisher=n},publishError:function(n,i){t.publisher?t.publisher():($$result.log(n),i&&$$result.log(i))},deniedHandler:null,setDeniedHandler:function(n){t.deniedHandler=n},getDeniedHandler:function(n){return n===undefined?t.deniedHandler:n},defaultErrorHandler:function(n){var i="Error initializing file system. ";switch(n.code){case FileError.NOT_FOUND_ERR:i+="File or directory not found. ";break;case FileError.SECURITY_ERR:i+="Security error. ";break;case FileError.ABORT_ERR:i+="Abort error. ";break;case FileError.NOT_READABLE_ERR:i+="File or directory not readable. ";break;case FileError.ENCODING_ERR:i+="Encoding error. ";break;case FileError.NO_MODIFICATION_ALLOWED_ERR:i+="No modification allowed. ";break;case FileError.INVALID_STATE_ERR:i+="Invalid state. ";break;case FileError.SYNTAX_ERR:i+="Syntax error. ";break;case FileError.INVALID_MODIFICATION_ERR:i+="Invalid modification. ";break;case FileError.QUOTA_EXCEEDED_ERR:i+="Quota exceeded. ";break;case FileError.TYPE_MISMATCH_ERR:i+="Invalid filetype. ";break;case FileError.PATH_EXISTS_ERR:i+="File or directory already exists. ";break;default:i+="Unknown error. "}t.publishError(i,n)},getFailHandler:function(n){return n===undefined?t.defaultErrorHandler:n}},n={calculateBytesByMegabytes:function(n){return n*1048576},fileSystem:null,request:function(i,r){if(n.fileSystem!=null){i(n.fileSystem);return}var u=n.calculateBytesByMegabytes(2);navigator.webkitTemporaryStorage.requestQuota(u,function(f){u==f?window.requestFileSystem(window.TEMPORARY,f,function(t){n.fileSystem=t;i(t)},t.defaultErrorHandler):(r=t.getDeniedHandler(r),r&&r({message:"The amount of granted bytes by the HTML5 file system is less than the requested size.",requrestedSize:u,grantedBytes:f}))},t.defaultErrorHandler)},createOptions:function(n,t,i,r){return i===undefined&&(i=!1),r===undefined&&(r=!1),{root:t,path:n,recursive:i,exclusive:r,directoryPath:"",fileName:""}},parsePathOrOptions:function(t){var f=t.toString(),i,u,r;return f===t?i=n.createOptions(t,n.fileSystem.root):(i=t,u=function(){return i.root===undefined||i.root===null||!i.root},u()&&(i.root=n.fileSystem.root)),r=i.path.split("/"),r.length>0&&r[r.length-1].indexOf(".")!==-1&&(i.fileName=r.pop()),i.directoryPath=r.join("/"),i}},i={createDirectory:function(i,r,u){n.request(function(){u=t.getFailHandler(u);var f=n.parsePathOrOptions(i),e=!0,o=function(n,t){if(n.length>0){var i=n[0];t.getDirectory(i,{create:!0,exclusive:f.exclusive},function(t){r(t,{isFirstDirectory:e,isLastDirectory:n.length===1});e&&(e=!1);var i=n.slice(1);i.length>0&&o(i,t)},u)}},s=f.directoryPath.split("/");o(s,f.root)})},getDirectory:function(i,r,u){n.request(function(){var f=n.parsePathOrOptions(i);u=t.getFailHandler(u);f.root.getDirectory(f.path,{},r,u)})},directoryExists:function(n,r,u){var f={exists:!1};u=t.getFailHandler(u);i.getDirectory(n,function(){f.exists=!0;r(f)},function(n){n.code!==1?u(n):r(f)})},getDirectoryEntries:function(r,u,f){n.request(function(){f=t.getFailHandler(f);i.getDirectory(r,function(n){var t=n.createReader();t.readEntries(function(n){u(n)},f)},f)})},deleteDirectory:function(r,u,f){n.request(function(){f=t.getFailHandler(f);r=n.parsePathOrOptions(r);i.getDirectory(r,function(n){r.recursive?n.removeRecursively(u,f):n.remove(u,f)},f)})},moveDirectory:function(r,u,f){n.request(function(){var o=n.parsePathOrOptions(r),s=n.parsePathOrOptions(u),e=t.getFailHandler(e);i.createDirectory(s,function(n){i.getDirectory(o,function(t){t.moveTo(n);f()},e)},e)})},renameDirectory:function(r,u,f){n.request(function(){var o=n.parsePathOrOptions(r),e=t.getFailHandler(e);i.getDirectory(o,function(n){n.getParent(function(t){n.moveTo(t,u);f()},e)},e)})},copyDirectory:function(r,u,f){n.request(function(){var o=n.parsePathOrOptions(r),s=n.parsePathOrOptions(u),e=t.getFailHandler(e);i.createDirectory(s,function(n){i.getDirectory(o,function(t){t.copyTo(n);f()},e)},e)})}},r={createFile:function(r,u,f){n.request(function(){var e=n.parsePathOrOptions(r);f=t.getFailHandler(f);i.createDirectory(e,function(n,t){t.isLastDirectory&&n.getFile(e.fileName,{create:!0,exclusive:e.exclusive},u,f)},f)})},getFile:function(r,u,f){n.request(function(){var e=n.parsePathOrOptions(r);f=t.getFailHandler(f);i.getDirectory(e.directoryPath,function(n){n.getFile(e.fileName,{},u,f)})})},fileExists:function(u,f,e){n.request(function(){var s=n.parsePathOrOptions(u),o={exists:!1};e=t.getFailHandler(e);i.directoryExists(s.directoryPath,function(n){n.exists?r.getFile(s,function(){o.exists=!0;f(o)},function(n){n.code!==1?e(n):f(o)}):f(o)})})},readFile:function(i,u,f){n.request(function(){var e=n.parsePathOrOptions(i);f=t.getFailHandler(f);r.getFile(e,function(n){n.file(function(n){var t=new FileReader;t.onloadend=function(){u(this.result)};t.onerror=function(n){f(n)};t.readAsText(n)})},f)})},prependFile:function(i,u,f,e,o){u&&u.length>0&&n.request(function(){var s=n.parsePathOrOptions(i);o=t.getFailHandler(o);f||(f="text/plain");r.getFile(s,function(n){n.createWriter(function(n){n.onwriteend=function(){e()};n.onerror=function(n){o(n)};var t=new Blob([u],{type:f});n.write(t)})},o)})},appendFile:function(i,u,f,e,o){n.request(function(){if(u&&u.length>0){var s=n.parsePathOrOptions(i);o=t.getFailHandler(o);f||(f="text/plain");r.getFile(s,function(n){n.createWriter(function(n){n.seek(n.length);n.onwriteend=function(){e()};n.onerror=function(n){o(n)};var t=new Blob([u],{type:f});n.write(t)})},o)}},o)},deleteFile:function(i,u,f){n.request(function(){var e=n.parsePathOrOptions(i);f=t.getFailHandler(f);r.getFile(e,function(n){n.remove(u,f)},f)})},replaceFile:function(i,u,f,e){n.request(function(){var s=n.parsePathOrOptions(i),o=t.getFailHandler(o);r.deleteFile(i,function(){r.createFile(s,function(){r.prependFile(s,u,f,e,o)},o)},o)})},moveFile:function(u,f,e,o){n.request(function(){var s=n.parsePathOrOptions(u);o=t.getFailHandler(o);i.createDirectory(f,function(n,t){t.isLastDirectory&&r.getFile(u,function(t){t.moveTo(n);e()},o)},o)})},renameFile:function(u,f,e,o){n.request(function(){var s=n.parsePathOrOptions(u);o=t.getFailHandler(o);r.getFile(s,function(n){i.getDirectory(s.directoryPath,function(t){n.moveTo(t,f);e()},o)},o)})},copyFile:function(u,f,e,o){n.request(function(){var s=n.parsePathOrOptions(u);o=t.getFailHandler(o);i.createDirectory(f,function(n,t){t.isLastDirectory&&r.getFile(u,function(t){t.copyTo(n);e()},o)},o)})}};return{createOptions:n.createOptions,defaultErrorHandler:t.defaultErrorHandler,setErrorPublisher:t.setErrorPublisher,setDeniedHandler:t.setDeniedHandler,getDirectory:i.getDirectory,getDirectoryEntries:i.getDirectoryEntries,deleteDirectory:i.deleteDirectory,createDirectory:i.createDirectory,moveDirectory:i.moveDirectory,renameDirectory:i.renameDirectory,copyDirectory:i.copyDirectory,directoryExists:i.directoryExists,createFile:r.createFile,getFile:r.getFile,fileExists:r.fileExists,readFile:r.readFile,appendFile:r.appendFile,prependFile:r.prependFile,replaceFile:r.replaceFile,deleteFile:r.deleteFile,moveFile:r.moveFile,renameFile:r.renameFile,copyFile:r.copyFile}}();
//# sourceMappingURL=localFileSystem.min.js.map